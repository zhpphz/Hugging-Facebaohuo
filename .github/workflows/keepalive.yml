name: Keepalive All Hugging Face Spaces
on:
  schedule:
    - cron: "0 */2 * * *"  # 每6小时运行一次（UTC时间）
jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4  # 拉取仓库内容（获取urls.txt）
        
      - name: Ping all Spaces
        run: |
          while IFS= read -r url; do
            if [ -n "$url" ]; then
              echo "▶ Pinging: $url"
              status_code=$(curl -s -o /dev/null -w "%{http_code}" "$url")
              echo "   Status: $status_code"
              sleep $((RANDOM % 30 + 10))  # 随机延迟10~40秒
            fi
          done < urls.txt
