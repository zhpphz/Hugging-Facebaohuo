name: Keepalive All Hugging Face Spaces
on:
  workflow_dispatch: true   
  schedule:
    - cron: "0 */2 * * *"   
jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Ping all Spaces
        run: |
          while IFS= read -r url; do
            if [ -n "$url" ]; then
              echo "â–¶ Pinging: $url"
              status_code=$(curl -s -o /dev/null -w "%{http_code}" "$url")
              echo "   Status: $status_code"
              sleep $((RANDOM % 30 + 10))
            fi
          done < urls.txt
